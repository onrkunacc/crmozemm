@model UpdateFileViewModel
@{
	ViewData["Title"] = $"Dosya Güncelle - {Model.FileName}";
}
<div class="container mt-4">
	<h2>Dosya Güncelle: @Model.FileName</h2>
	<hr />
	<form asp-action="UpdateFile" method="post">
		<input type="hidden" asp-for="CariId" />
		<input type="hidden" asp-for="Year" />
		<input type="hidden" asp-for="FileName" />
		<input type="hidden" id="file-content" name="FileContent" />
		<div id="editor-container" style="height: 700px; border: 1px solid #ccc;"></div>
		<button type="submit" class="btn btn-success mt-3" onclick="syncContent()">Kaydet</button>
		<a asp-action="Index" class="btn btn-secondary mt-3">Geri Dön</a>
	</form>
</div>

<!-- Quill and CSS -->
<link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.js"></script>

<script>
	
	var initialContent = `@Html.Raw(Model.FileContent ?? "")`;

	var quill = new Quill('#editor-container', {
		theme: 'snow',
		modules: {
			toolbar: [
				[{ 'header': [1, 2, false] }],
				['bold', 'italic', 'underline'],
				[{ 'list': 'ordered'}, { 'list': 'bullet' }],
				[{ 'align': [] }], // Hizalama araçları
				['clean'], // Temizle
				['table'] // Tablo (Better Table eklentisi gerekiyorsa eklenebilir)
			]
		}
	});

	
	quill.clipboard.dangerouslyPasteHTML(initialContent);

	
	function syncContent() {
		var content = quill.root.innerHTML;
		document.getElementById('file-content').value = content;
	}
</script>